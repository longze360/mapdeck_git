% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/coordinate-detector.R,
%   R/coordinate-transformer.R
\name{detect_coordinate_system}
\alias{detect_coordinate_system}
\title{Detect coordinate reference system}
\usage{
detect_coordinate_system(data, confidence_threshold = 0.8, sample_size = 1000)

detect_coordinate_system(data, confidence_threshold = 0.8, sample_size = 1000)
}
\arguments{
\item{data}{Spatial data (sf object, data.frame with coordinates, or coordinate matrix)}

\item{confidence_threshold}{Numeric threshold for detection confidence (0-1, default: 0.8)}

\item{sample_size}{Integer number of points to sample for analysis (default: 1000)}

\item{lon_col}{Longitude column name/index (default: auto-detect)}

\item{lat_col}{Latitude column name/index (default: auto-detect)}
}
\value{
List with detected CRS and confidence score

List containing:
  \itemize{
    \item detected_crs: Most likely coordinate system ("WGS84", "GCJ02", "BD09", or "UNKNOWN")
    \item confidence: Confidence score (0-1)
    \item analysis: Detailed analysis results
  }
}
\description{
Convenience function to detect the CRS of spatial data without creating a class instance.

This function analyzes coordinate data to automatically determine whether it uses
WGS84, GCJ02, or BD09 coordinate system. It uses statistical analysis of coordinate
ranges and patterns to make the determination.
}
\details{
Automatically detect the coordinate system of spatial data based on coordinate ranges and patterns.


The detection algorithm analyzes:
\itemize{
  \item Coordinate ranges and bounds
  \item Statistical distribution patterns
  \item Offset patterns characteristic of each coordinate system
  \item Geographic clustering within China boundaries
}

Detection is most accurate for coordinates within China where the different
coordinate systems show distinct patterns. For coordinates outside China,
WGS84 is typically assumed.
}
\examples{
\donttest{
# Detect CRS of coordinate data
data <- data.frame(lon = c(116.3974, 121.4737), lat = c(39.9093, 31.2304))
detection <- detect_coordinate_system(data)
print(paste("Detected CRS:", detection$crs, "with confidence:", detection$confidence))
}

\donttest{
# Detect coordinate system from data frame
data <- data.frame(
  lon = c(116.3974, 116.4074, 116.3874),
  lat = c(39.9093, 39.9193, 39.8993)
)
detection <- detect_coordinate_system(data)
print(detection$detected_crs)
print(detection$confidence)

# Detect from sf object
library(sf)
sf_data <- st_as_sf(data, coords = c("lon", "lat"))
detection <- detect_coordinate_system(sf_data)

# Detect with custom confidence threshold
detection <- detect_coordinate_system(data, confidence_threshold = 0.9)
}

}
